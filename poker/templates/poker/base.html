<!doctype html>
<html class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Planning Poker{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Space Grotesk"', "ui-sans-serif", "system-ui"],
            },
            colors: {
              brand: {
                light: "#c4b5fd",
                DEFAULT: "#7c3aed",
                dark: "#5b21b6",
              },
            },
          },
        },
      };
    </script>
  </head>
  <body class="min-h-full bg-slate-950 text-white">
    <div class="min-h-screen bg-[radial-gradient(circle_at_top,_rgba(124,58,237,0.25),_rgba(2,6,23,0.9))]">
      <div class="mx-auto max-w-6xl px-4 py-10 lg:px-6">
        <header class="mb-8 rounded-3xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-brand/10 backdrop-blur">
          <div class="flex flex-wrap items-center justify-between gap-4">
            <div class="flex items-center gap-4">
              <div class="flex h-14 w-14 items-center justify-center rounded-2xl bg-brand/20 text-3xl">ðŸ‚¡</div>
              <div>
                <p class="text-sm uppercase tracking-[0.6em] text-brand-light">Welltech</p>
                <h1 class="text-2xl font-semibold text-white">Planning Poker</h1>
                <p class="text-sm text-slate-200/90">Confidence-driven estimation for modern teams.</p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              {% if request.session.org_email %}
                <span class="rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm text-white">
                  {{ request.session.org_email }}
                </span>
                <form method="post" action="{% url 'poker:org_logout' %}">
                  {% csrf_token %}
                  <button class="rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-900 shadow-md shadow-white/25 transition hover:bg-brand-light">
                    Sign out
                  </button>
                </form>
              {% else %}
                <a class="rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-900 shadow-md shadow-white/25 transition hover:bg-brand-light" href="{% url 'poker:org_login' %}">
                  Sign in
                </a>
              {% endif %}
            </div>
          </div>
        </header>

        {% if messages %}
          <div class="mb-6 space-y-3">
            {% for message in messages %}
              <div class="rounded-2xl border border-white/10 bg-white/10 px-4 py-3 text-sm font-medium
                          {% if message.tags == 'error' %} text-red-200 border-red-400/30 bg-red-400/10
                          {% elif message.tags == 'success' %} text-emerald-200 border-emerald-400/30 bg-emerald-400/10
                          {% else %} text-white {% endif %}">
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <main class="space-y-8">
          {% block content %}{% endblock %}
        </main>
      </div>
    </div>
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  </body>
</html>
