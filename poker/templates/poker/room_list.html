{% extends 'poker/base.html' %}
{% block content %}
<section class="rounded-3xl border border-white/10 bg-gradient-to-br from-brand/30 via-indigo-500/10 to-transparent p-8 shadow-2xl shadow-brand/10">
  <div class="flex flex-wrap items-center justify-between gap-6">
    <div>
      <p class="text-sm uppercase tracking-[0.5em] text-brand-light">Sprint-ready</p>
      <h2 class="mt-3 text-3xl font-semibold text-white">Estimate faster, align sooner.</h2>
      <p class="mt-2 max-w-3xl text-base text-slate-200">
        Set up a fresh room for every refinement, keep facilitators in command, and vote with beautiful card decks.
        Planning Poker keeps conversation focused and automatically tracks consensus.
      </p>
    </div>
    <div class="rounded-2xl bg-white/10 px-6 py-4 text-center text-sm text-slate-100">
      <p class="text-3xl font-semibold text-white">{{ rooms|length }}</p>
      <p>rooms crafted lately</p>
    </div>
  </div>
</section>

<div class="grid gap-8 md:grid-cols-[1.1fr_0.9fr]">
  <div class="rounded-3xl bg-white/95 p-6 text-slate-900 shadow-xl shadow-slate-900/10">
    <div class="flex items-center justify-between mb-4">
      <div>
        <p class="text-sm uppercase tracking-[0.4em] text-brand">New ritual</p>
        <h3 class="text-2xl font-semibold text-slate-900">Create a planning room</h3>
      </div>
      <span class="rounded-full bg-brand/10 px-4 py-1 text-xs font-semibold text-brand">~2 min</span>
    </div>
    <form method="post" action="{% url 'poker:room_create' %}" class="space-y-4">
      {% csrf_token %}
      {% if form.non_field_errors %}
        <p class="rounded-xl bg-red-50 px-3 py-2 text-sm text-red-700">{{ form.non_field_errors|join:", " }}</p>
      {% endif %}
      {% for field in form %}
        <label class="block text-sm font-medium text-slate-600 space-y-2">
          {{ field.label }}
          {{ field }}
          {% if field.help_text %}
            <p class="text-xs text-slate-400">{{ field.help_text }}</p>
          {% endif %}
          {% for error in field.errors %}
            <p class="text-xs text-red-600">{{ error }}</p>
          {% endfor %}
        </label>
      {% endfor %}
      <button class="w-full rounded-2xl bg-slate-900 px-4 py-2.5 text-base font-semibold text-white shadow-lg shadow-brand/20 transition hover:bg-slate-800">
        Launch room
      </button>
    </form>
  </div>

  <div class="rounded-3xl border border-white/15 bg-white/5 p-6 shadow-xl shadow-slate-900/20 backdrop-blur">
    <div class="flex items-center justify-between">
      <h3 class="text-xl font-semibold text-white">Recent rooms</h3>
      <span class="text-sm text-slate-200">Auto-refreshing</span>
    </div>
    <ul class="mt-4 space-y-3">
      {% for r in rooms %}
        <li class="flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white">
          <div class="min-w-0">
            <p class="font-semibold text-white">{{ r.name }}</p>
            <p class="text-xs uppercase tracking-[0.4em] text-brand-light">Code {{ r.code }}</p>
          </div>
          <a class="rounded-xl bg-white/90 px-3 py-1.5 text-sm font-semibold text-slate-900 shadow-inner shadow-white/60 transition hover:bg-white" href="{% url 'poker:room_detail' r.code %}">
            Open
          </a>
        </li>
      {% empty %}
        <li class="rounded-2xl border border-dashed border-white/20 px-4 py-6 text-center text-slate-200">
          No rooms yet â€” be the first to start a planning round.
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
